%=========================================================================
% (c) Michal Bidlo, Bohuslav Křena, 2008


%čo všetko môžem prebrať z BP?
%graf s num. chybami? nie
%čo všetko môžem prebrať zo závadovej BP?priloha
%čo všetko môžem prebrať od čambora? popis násobenia/sčítania priloha
%na kolko členov bude pracovať taylorová rada? treba tolko registrov 20/40
%aká sústava rovníc? aké zapojenie?
%ako bude prebiehať obhajoba?
%pevná rádová čiarka obrázok je česky....mám rperobiť na slovenský?netreba

\chapter{Úvod}
Hlavným cieľom tejto práce je návrh hardvérových komponentov na riešenie rozsiahlych diferenciálnych rovníc. Diferenciálne rovnice sa väčšinou riešia pomocou numerickej integrácie, a teda s~použitím vhodných numerických metód. Hardvérový komponent využívajúci numerickú integráciu sa nazýva numerický integrátor.

V~kapitole~\ref{NUM_INTEGRACIA} sú predstavené rôzne numerické metódy - Eulerova metóda, metóda Runge-Kutta a Taylorov rad. Najväčšia pozornosť je venovaná metóde Taylorovej rady, ktorá poskytuje vhodný pomer medzi rýchlosťou a presnosťou \cite{KunovskyH}. Bližší popis a práca s~toutou metódou sú uvedené v~kapitole~\ref{SOLUTION_WITH_TAYLOR}. Ukážeme si rozdelenie Taylorovej rady na jednotlivé členy a následne úpravu týchto členov tak, aby bolo možné výpočet čo najviac paralelizovať a optimalizovať. Táto úprava bude realizovaná na obyčajných diferenciálych rovniciach s~operáciou násobenia a delenia. Takto upravené a vytvorené rovnice budú následne použité pri návrhu rôznych typov numerických integrátorov.

Kapitola~\ref{REPREZENTACIA_OPERANDOV} sa zaoberá reprezentáciou operandov v~pevnej a v~pohyblivej rádovej čiarke. Pri použití pohyblivej rádovej čiarky sú uvedené postupy výpočtu znamienka, exponentu a mantisy na jednoduchých matematických operáciách ako sú sčítanie, odčítanie, násobenie a delenie.

V~kapitole~\ref{NUM_INTEGRATORY} sú predstavené a popísané návrhy jednotlivých integrátorov a popis ich činnosti. Podľa rovníc uvedených v~kapitole~\ref{SOLUTION_WITH_TAYLOR}, sú navrhnuté paralelné numerické integrátory s~operáciou násobenia a delenia. Oba integrátory sú navrhnuté v~prevedení pevnej a pohyblivej rádovej čiarky. Operácia delenia je realizovaná pomocou deliacho algoritmu SRT. Bližší popis tohto algoritmu sa nachádza v~bakalárskej práci Simulátor procesora s~operáciou delenia \cite{MatecnyBP}.
Vzájomným zapojením navrhnutých numerických integrátorov je možné riešiť rozsiahle diferenciálne rovnice.




\chapter{Numerická integrácia} \label{NUM_INTEGRACIA}
%popis počáteční úlohy, diskretizace, exaktné/numerické riešenie


Diferenciálne rovnice sú matematické rovnice, v~ktorých ako premenné vystupujú derivácie funkcií. Najvyššia derivácia v~rovnici udáva rád rovnice. Rovnice, ktoré obsahujú derivácie len podľa jednej premennej, sa nazývajú obyčajné diferenciálne rovnice (ODR). Rovnice, ktoré obsahujú derivácie podľa viacerých premenných, sú takzvané parciálne diferenciálne rovnice (PDR).
Diferenciálnu rovnicu je možné riešiť analyticky alebo použitím numerickej metódy. Pri väčšine praktických úloh je analytické riešenie veľmi zložité, preto sa používa skôr riešenie numerické. Základným princípom numerického riešenia je diskretizácia premenných, keď spojitú veličinu nahradíme postupnosťou diskrétnych bodov. Pri použití dostatočne hustom rozložení bodov môžeme približne reprezentovať spojitú veličinu. Vzdialenosť medzi dvoma susednými bodmi sa nazýva krok metódy. Numerické metódy pri svojom výpočte používajú niekoľko predchádzajúcich krokov. Podľa počtu týchto krokov rozdeľujeme numerické metódy na metódy jednokrokové a viackrokové. Jednokrokové metódy pri svojom výpočte používajú len jeden predchádzajúci krok, viackrokové využívajú niekoľko predchádzajúcich krokov. Pri numerických metódach je teda potrebné zvoliť počiatočný stav t.j. počiatočnú podmienku riešenej úlohy. Od nej sa následne počita hodnota funkcie v ďalšom bode \cite{NumMetody}. 

Najhlavnejšími kritériami pri numerických metodách je ich presnosť a rýchlosť. Tie je možné ovplyvniť veľkosťou integračného kroku a rádom integračnej metódy. Pri počítaní numerickými metódami nedostávame teoreticky presné riešenie, ale výsledok konverguje k~správnemu riešeniu, a teda dostávame výsledok s~určitou presnosťou. Výsledná chyba výpočtu je súčet lokálnej a akumulovanej chyby.  Lokálna chyba zahŕňa chybu numerickej metódy a zaokrúhľovaciu chybu, ktorá môže byť spôsobená typom hardvérovej architektúry, ako napríklad použitím pevnej alebo pohyblivej rádovej čiarky, ktoré sú bližšie popísané v~kapitole \ref{REPREZENTACIA_OPERANDOV}. Akumulovaná chyba je súčtom lokálnych chýb, a teda sa počas výpočtu zvyšuje. Chyba v jednom kroku tak ovplivňuje výsledky krokov nasledujúcich.


\section{Taylorova rada}
Táto numerická metóda je tvorená nekonečným radom, avšak na výpočet sa používa len niekoľko jej členov. Počet použitých členov udáva rád metódy. Čím väčší počet členov použijeme, tým je výsledok presnejší. Počet použitých členov môže byť zadaný fixne, alebo sa môže dynamicky meniť v~závislosti od požadovanej presnosti. Presnosť sa počíta z~viacerých najvyšších členov, a po dosiahnutí požadovanej presnosti výpočet končí.
Nekonečnú Taylorovu radu môžeme zapísať:

\begin{eqnarray}
y_{i + 1} = y_{i} + h y'_{i} + \dfrac{h^{2}}{2!}y''_{i} + \dfrac{h^{3}}{3!}y'''_{i} + \dfrac{h^{4}}{4!}y^{(4)}_{i} + \cdots + \dfrac{h^{n}}{n!}y_{i}^{(n)} \, , \label{Taylor}
\end{eqnarray}

kde $ h $ je veľkosť integračného kroku a $ i $ označuje krok diskretizovanej veličiny. Ďalšie popísané metódy sú odvodené od Taylorovej rady.


\section{Eulerova metóda}
Najjednoduchšou jednokrokovou metódou pre riešenie obyčajných diferenciálych rovníc je Eulerova metóda. Je to Taylorova metóda 1. rádu, keďže používa len prvé dva členy Taylorovej rady. Preto je rýchla, ale menej presná. Zapisuje sa nasledovne:

\begin{eqnarray}
y_{i+1} = y_{i} + hy'_{i}
\end{eqnarray}

Zvolením dostatočne malého integračného kroku $ h $ môžeme zvýšiť jej presnosť. Čím je však krok menší, tým je výpočet pomaľší.


\section{Runge-Kutta}
Ďalšou veľmi známou numerickou metódou je Runge-Kutta. Všeobecná schéma tejto metódy má tvar:

\begin{eqnarray}
y_{i+1} & = & y_{i} + \sum^{r}_{j=1} \alpha_{j}k_{j} , \quad i=0, 1,\dotsc \\
k_{1} & = & f(x_{i},y_{i}) \nonumber \\
k_{j} & = & f(x_{i} + \lambda_{j}h, y_{i} + \mu_{j}hk_{j-1}) , \quad j=2,\dotsc r \nonumber
\end{eqnarray}

kde $\alpha_{j}, \lambda_{j}$ a $\mu_{j}$ sú vhodne zvolené konštanty a $ r $ určuje rád metódy. Ako je z~uvedených rovníc vidieť, pri výpočte sa používajú medzivýpočty $ k $, ktorých počet je rovný rádu metódy.
Najznámejšie a najčastejšie používané varianty sú Runge-Kutta 2. a 4. rádu, ktoré sú popísané nižšie.

\subsection{Runge-Kutta 2. rádu} \label{RK2}
Táto metóda je oproti Eulerovej metóde presnejšia, ale pri rovnakej veľkosti integračného kroku vyžaduje viac operácií. Na výpočet používa dva medzivýpočty $ k_{1} $ a $ k_{2} $. Má nasledujúci tvar:

\begin{eqnarray}
y_{i+1} & = & y_{i} + \frac{1}{2}h(k_{1} + k_{2}) \\
k_{1} & = & f(t_{i},y_{i}) \nonumber \\
k_{2} & = & f(t_{i+1}, y_{i} + hk_{1}) \nonumber
\end{eqnarray}


\newpage
\subsection{Runge-Kutta 4. rádu} \label{RK4}
Runge-Kutta 4 rádu je najpoužívanejší tvar tejto metódy, ktorý môžeme zapísať nasledovne:

\begin{eqnarray}
y_{i+1} & = & y_{i} + \frac{1}{6}h(k_{1} + 2k_{2} + 2k_{3} + k_{4}) \\
k_{1} & = & f(t_{i},y_{i}) \nonumber \\
k_{2} & = & f(t_{i+1} + \frac{1}{2}h, y_{i} + \frac{1}{2}hk_{1}) \nonumber \\
k_{3} & = & f(t_{i+1} + \frac{1}{2}h, y_{i} + \frac{1}{2}hk_{2}) \nonumber \\
k_{4} & = & f(t_{i+1} + h, y_{i} + hk_{3}) \nonumber
\end{eqnarray}

Pri výpočte sú použité štyri medzivýpočty, avšak aj napriek tomu má táto metóda dobrý pomer rýchlosti a presnosti.


\chapter{Riešenie diferenciálnych rovníc Taylorovou radou} \label{SOLUTION_WITH_TAYLOR}
Na riešenie diferenciálnych rovníc je možné upraviť základný tvar Taylorovej rady \eqref{Taylor} tak, aby sa dali jednotlivé operácie vykonávať paralelne. Prevod jednoduchej obyčajnej diferenciálnej rovnice je prevzatý z~\cite{MatecnyBP}. Ďalšie možné zdroje sú \cite{OpalkaDP}, \cite{KrausDisP}. \\

Obyčajná diferenciálna rovnica:
\begin{eqnarray}
y' = y \, , \quad y(0) = y_{0}. \, \label{jednoducha_rovnica}
\end{eqnarray}

Z~tohto vzťahu vyplýva, že:
\begin{eqnarray}
y = y' = y'' = y''' = y^{(4)} =\cdots = y^{(n)} .
\end{eqnarray}

Po dosadení do Taylorovej rady \eqref{Taylor} získame:
\begin{eqnarray}
y_{i + 1} = y_{i} + h y_{i} + \dfrac{h^{2}}{2!}y_{i} + \dfrac{h^{3}}{3!}y_{i} + \dfrac{h^{4}}{4!}y_{i} + \cdots + \dfrac{h^{n}}{n!}y_{i}
\end{eqnarray}


To je možné prepísať na:
\begin{eqnarray}
y_{i + 1} = y_{i} + DY1_{i} + DY2_{i} + DY3_{i} + DY4_{i} + \cdots + DY(N)_{i} \label{TaylorDYcleny}
\end{eqnarray}

kde je význam jednotlivých členov nasledujúci:
\begin{eqnarray}
DY1_{i} & = & h y_{i} \label{DY_cleny} \\
DY2_{i} = \dfrac{h^{2}}{2!}y_{i} & = & \dfrac{h}{2} DY1_{i} \nonumber \\
DY3_{i} = \dfrac{h^{3}}{3!}y_{i} & = & \dfrac{h}{3} DY2_{i} \nonumber \\
DY4_{i} = \dfrac{h^{4}}{4!}y_{i} & = & \dfrac{h}{4} DY3_{i} \nonumber \\
& \vdots & \nonumber
%DY(N)_{i} =  \dfrac{h^{n}}{n!}y_{i} & = & \dfrac{h}{n} DY(N-1)_{i} \nonumber
\end{eqnarray}

Všeobecný zápis:
\begin{equation}
DY(N)_{i} =  \dfrac{h^{n}}{n!}y_{i} = \dfrac{h}{n} DY(N-1)_{i} \nonumber
\end{equation}

Z~týchto vzťahov je možné riešiť jednoduché diferenciálne rovnice, ako je tomu \cite{OpalkaBP}, \cite{KrausDisP}.
Zo vzťahov taktiež vyplýva, že každý ďalší člen Taylorovej rady je počítaný z~predchádzajúceho, čo vedie k~zefektívneniu výpočtu, a to hlavne pri vyšších deriváciách, kde je výpočet častokrát zložitý. Podobným postupom je možné upraviť diferenciálne rovnice, ktoré obsahujú operáciu násobenia alebo delenia, a tiež tak zvýšiť efektivitu výpočtu týchto výpočtovo náročnejších operácií. 


\section{Riešenie diferenciálnej rovnice s~operáciou násobenia}
Všeobecný zápis pre diferenciálnu rovnicu s operáciou násobenia je nasledujúci:
\begin{eqnarray}
y' & = & qr \, , \quad y(0) = y_{0} \label{dif_nasobenie}
\end{eqnarray}

Pre výpočet každej premennej v rovnici je potrebné použiť Taylorovu radu v tvare \eqref{TaylorDYcleny}. Jednotlivé Taylorove rady vyzerajú nasledovne:
\begin{eqnarray}
y_{i + 1} & = & y_{i} + DY1_{i} + DY2_{i} + DY3_{i} + DY4_{i} + \cdots + DY(n)_{i}\\
q_{i+1} & = & q_i + DQ1_i + DQ2_i + DQ3_i + DQ4_i + \cdots + DQ(n)_i\\
r_{i+1} & = & r_i + DR1_i + DR2_i + DR3_i + DR4_i + \cdots + DR(n)_i
\end{eqnarray}


Spočítame jednotlivé derivácie rovnice \eqref{dif_nasobenie}:
\begin{eqnarray}
y' & = & qr \nonumber \\
y'' & = & q'r + qr' \nonumber \\
y''' & = & q''r + 2q'r' + qr'' \nonumber \\
y^{(4)} & = & q'''r + 3q''r'+ 3q'r'' + qr''' \nonumber \\
 & \vdots \nonumber &
\end{eqnarray}


Ako je vidieť, derivácie vytvárajú Pascalov trojuholník a možeme ich všeobecne zápísať ako:
\begin{equation}
y^{(n+1)} = \sum_{k=0}^n \binom{n}{k} q^{(n-k)} r^{(k)} \nonumber
\end{equation}
\bigskip

Z derivácií odvodíme jednotlivé členy Taylorovej rady \eqref{Taylor}, ktoré majú nasledujúci význam:
\begin{eqnarray}
\dfrac{DY1_{i}}{h} & = & DQ0_i DR0_i \\
\dfrac{DY2_{i}}{\frac{h^{2}}{2!}} & = & \dfrac{DQ1_i}{h} DR0_i + DQ0_i \dfrac{DR1_i}{h} \nonumber \\
\dfrac{DY3_{i}}{\frac{h^{3}}{3!}} & = & \dfrac{DQ2_i}{\frac{h^{2}}{2!}} DR0_i + 2 \dfrac{DQ1_i}{h} \dfrac{DR1_i}{h} + DQ0_i \dfrac{DR2_i}{\frac{h^{2}}{2!}} \nonumber \\
\dfrac{DY4_{i}}{\frac{h^{4}}{4!}} & = & \dfrac{DQ3_i}{\frac{h^{3}}{3!}} DR0_i + 3 \dfrac{DQ2_i}{\frac{h^{2}}{2!}} \dfrac{DR1_i}{h} + 3 \dfrac{DQ1_i}{h} \dfrac{DR2_i}{\frac{h^{2}}{2!}} + DQ0_i \dfrac{DR3_i}{\frac{h^{3}}{3!}} \nonumber \\
& \vdots \nonumber & 
\end{eqnarray}



Po úprave dostaneme konečný tvar jednotlivých členov:
\begin{eqnarray}
DY1_{i} & = & hq_{i}r_{i} \label{DY1_cleny_nasobenia} \\
DY2_{i} & = & \frac{h}{2} (DQ1_{i}DR0_{i} + DQ0_{i}DR1_{i}) \label{DY2_cleny_nasobenia} \\
DY3_{i} & = & \frac{h}{3} (DQ2_{i}DR0_{i} + DQ1_{i}DR1_{i} + DQ0_{i}DR2_{i}) \label{DY3_cleny_nasobenia} \\
DY4_{i} & = & \frac{h}{4} (DQ3_{i}DR0_{i} + DQ2_{i}DR1_{i} + DQ1_{i}DR2_{i} + DQ0_{i}DR3_{i}) \label{DY4_cleny_nasobenia} \\
& \vdots \nonumber &
\end{eqnarray}

Všeobecný zápis:
\begin{equation}
DY(N)_{i} = \dfrac{h}{N} \cdot \left( \sum_{k=1}^N DQ(N-k)_{i} \cdot DR(k-1)_{i} \right) \label{suma_mul}
\end{equation}

Uvedený prevod vychádza z práce \cite{ZavadaBP}. Jednotlivé rovnice členov Taylorovej rady budú slúžiť pri návrhu a implementácií násobiacich integrátorov.


\section{Riešenie diferenciálnej rovnice s~operáciou delenia}
Podobne, ako v~predchádzajúcom prípade, zapíšme diferenciálnu rovnicu s~operáciou delenia nasledovne:
\begin{eqnarray}
y' & = & \dfrac{u}{v} \, , \quad y(0) = y_{0} \label{dif_delenie}
\end{eqnarray}



Jednotlivé Taylorove rady pre premenné v rovnici vyzerajú nasledovne:
\begin{eqnarray}
y_{i + 1} & = & y_{i} + DY1_{i} + DY2_{i} + DY3_{i} + DY4_{i} + \cdots + DY(n)_{i}\\
u_{i+1} & = & u_i + DU1_i + DU2_i + DU3_i + DU4_i + \cdots + DU(n)_i\\
v_{i+1} & = & v_i + DV1_i + DV2_i + DV3_i + DV4_i + \cdots + DV(n)_i
\end{eqnarray}



Ďalšie derivácie rovnice \eqref{dif_delenie} sú:
\begin{eqnarray}
y'' = \dfrac{u'v - uv'}{v^{2}} & = & \dfrac{1}{v} (u' - y'v') \label{derivacie_delenie} \\
y''' = \left( \dfrac{1}{v} (u' - y'v') \right)' & = & \dfrac{1}{v} (u'' - 2y''v' - y'v'') \nonumber \\
y^{(4)} = \left( \dfrac{1}{v} (u'' - 2y''v' - y'v') \right)' & = & \dfrac{1}{v} (u''' - 3y'''v' - 3y''v'' - y'v''') \nonumber \\
 & \vdots \nonumber &
\end{eqnarray}

Aj tu je vidieť, že jednotlivé derivácie tvoria Pascalov trojuholník. Všeobecný zápis je nasledovný:
\begin{equation}
y^{(n+1)} = \dfrac{1}{v} \left( u^{(n)} - \left( \sum_{k=1}^n \binom{n}{k} y^{(n-k+1)} v^{(k)} \right) \right) \nonumber
\end{equation}
\bigskip

Po dosadení jednotlivých členov $ DV(n)_{i} $ a $ DU(n)_{i} $ do derivácií \eqref{derivacie_delenie} dostaneme:
\begin{eqnarray}
\dfrac{DY1_{i}}{h} & = & \frac{1}{v} u~\\
\dfrac{DY2_{i}}{\frac{h^{2}}{2!}} & = & \dfrac{1}{v} ( \dfrac{DU1_{i}}{h} - \dfrac{DY1_{i}}{h}\dfrac{DV1_{i}}{h} ) \nonumber \\
\dfrac{DY3_{i}}{\frac{h^{3}}{3!}} & = & \dfrac{1}{v} 
( \dfrac{DU2_{i}}{\frac{h^{2}}{2!}} - 
2\dfrac{DY2_{i}}{\frac{h^{2}}{2!}} \dfrac{DV1_{i}}{h} - 
\dfrac{DY1_{i}}{h} \dfrac{DV2_{i}}{\frac{h^{2}}{2!}} ) \nonumber \\
\dfrac{DY4_{i}}{\frac{h^{4}}{4!}} & = & \dfrac{1}{v} 
( \dfrac{DU3_{i}}{\frac{h^{3}}{3!}} - 
3\dfrac{DY3_{i}}{\frac{h^{3}}{3!}} \dfrac{DV1_{i}}{h} - 
3\dfrac{DY2_{i}}{\frac{h^{2}}{2!}} \dfrac{DV2_{i}}{\frac{h^{2}}{2!}} -
\dfrac{DY1_{i}}{h} \dfrac{DV3_{i}}{\frac{h^{3}}{3!}} ) \nonumber \\
& \vdots \nonumber & 
\end{eqnarray}


Po úprave majú jednotlivé členy Taylorovej rady nasledovný tvar:
\begin{eqnarray}
DY1_{i} & = & \frac{1}{v_{i}} (hu_{i}) \label{DY1_cleny_delenia} \\
DY2_{i} & = & \dfrac{1}{2v_{i}} (DU1_{i}h - DY1_{i}DV1_{i}) \label{DY2_cleny_delenia} \\
DY3_{i} & = & \dfrac{1}{3v_{i}} ( DU2_{i}h - 2DY2_{i}DV1_{i} - DY1_{i}DV2_{i} ) \label{DY3_cleny_delenia} \\
DY4_{i} & = & \dfrac{1}{4v_{i}} ( DU3_{i}h - 3DY3_{i}DV1_{i} - 2DY2_{i}DV2_{i} - DY1_{i}DV3_{i} ) \label{DY4_cleny_delenia} \\ 
& \vdots \nonumber & 
\end{eqnarray}

Všeobecný zápis:
\begin{equation}
DY(N)_{i} = \dfrac{1}{N DV0_{i}} \cdot \left( DU(N-1)_{i} \cdot h - \left( \sum_{k=1}^{N-1} (N-k) \cdot DY(N-k)_{i} \cdot DV(k)_{i} \right) \right) \label{suma_div}
\end{equation}
\bigskip

Vyjadrenie jednotlivých členov Taylorovej rady vychádza z~mojej bakalárskej práce~\cite{MatecnyBP}. Takto upravené členy sú následne použité na návrh jednotlivých typov integrátorov popísaných v~kapitole~\ref{NUM_INTEGRATORY}.



\chapter{Reprezentácia operandov} \label{REPREZENTACIA_OPERANDOV}
Čísla vo výpočtových systémoch sú reprezentované rôznymi spôsobmi v~závislosti od zvolenej aritmetiky. Najpoužívanjšie sú reprezentácie čísiel v~pevnej a v~pohyblivej rádovej čiarke (ang. fixed point (FX) a floating point (FP)). Obe aritmetiky sú popísané v nasledujúcich podkapitolách. Informácie v~tejto kapitole sú čerpané z~\cite{FXOnline}, \cite{FPOnline}, \cite{KrausDisP}, \cite{inpFP}, \cite{inpRepDat}.


\section{Pevná rádová čiarka}
Pri počítaní v~pevnej rádovej čiarke sú čísla reprezentované na $ k $ bitoch v~tvare $ n.m $, kde prvých $ n $ bitov tvorí časť čísla pred desatinnou čiarkou, a zostávajúcich $ m $ bitov tvorí číslo za desatinnou čiarkou. Pozícia desatinnej čiarky je dopredu známa. V~závislosti od jej pozície sa používajú rôzne formáty pevnej rádovej čiarky. Tie najpoužívanejšie sú znázornené na obrázku~\ref{formatfixpoint}. \\
Obrázok \ref{formatfixpointa} zobrazuje aritmetiku s nulovým počtom bitov za desatinnou čiarkou a teda sa jedná o celočíselnú arimtetiku na $ n $ bitoch. Vedľajší obrázok \ref{formatfixpointb} zobrazuje aritmetiku s $ n $ bitmi pred desatinnou čiarkou a s $ m $ bitmi za desatinou čiarkou. Ďalšia časť obrázku \ref{formatfixpointc} je opakom \ref{formatfixpointa}, kde je číslo reprezentované len za desatinou čiarkou na $ m $ bitoch. Posledný obrázok \ref{formatfixpointd} je podobný ako \ref{formatfixpointc}, ale s pridaným znamienkovým bitom $ S $.
V tejto práci budem používať FX aritemtiku v tvare \ref{formatfixpointb} s pridaním znamienkovým bitom na pozícii MSB (most significant bit).

%\bigskip
%\begin{figure}[h]
%\centering
%\scalebox{0.9}{\includegraphics{obrazky/pevna_rad_carka.eps}}
%\caption{Rôzne formáty fixed point aritmetiky \cite{KrausDisP}}
%\label{formatfixpoint}
%\end{figure}
%\bigskip

\begin{figure}[h]
\centering
\subfloat{\label{formatfixpointa} \includegraphics[width=0.44\linewidth]{obrazky/pevna_rad_carkaa.eps}} \hspace{0.6cm}
\subfloat{\label{formatfixpointb} \includegraphics[width=0.405\linewidth]{obrazky/pevna_rad_carkab.eps}} \\ \bigskip
\subfloat{\label{formatfixpointc} \includegraphics[width=0.405\linewidth]{obrazky/pevna_rad_carkac.eps}} \hspace{1.2cm}
\subfloat{\label{formatfixpointd} \includegraphics[width=0.405\linewidth]{obrazky/pevna_rad_carkad.eps}}
\caption{Rôzne formáty fixed point aritmetiky \cite{KrausDisP}}
\label{formatfixpoint}
\end{figure}
\bigskip

%Môžme si všimnúť že čísla uložené vo FX sú rovnomerne rozložené na časovej ose.
Vo fixed point aritmetike sa používajú rôzne kódy, napr. priamy kód, doplnkový kód či inverzný kód. V~nasledujúcich kapitolách a pri návrhu integrátorov v~pevnej rádovej čiarke budeme používať doplnkový kód. 

\newpage
\section{Pohyblivá rádová čiarka}
Čísla uložené v~pohyblivej rádovej čiarke sú tvorené exponentom a mantisou. Všeobecný tvar na získanie hodnoty uloženej vo FP je nasledujúci:

\begin{eqnarray}
X = B^{E}\cdot M
\end{eqnarray}

\begin{tabular}{ll}
$ X $ - výsledná hodnota \\
$ B $ - základ sústavy \\
$ E $ - hodnota exponentu \\
$ M $ - mantisa \\
\end{tabular}
\bigskip

Zvýšením počtu bitov v~exponente $ E $ sa zvýši rozsah hodnôt, ktorý je možný reprezentovať, a zvýšením počtu bitov v~mantise $ M $ za zvýši presnosť uložených čísel. Existuje veľa formátov uloženia čísel v~pohyblivej rádovej čiarke. Najpoužívanejší a najrozšírenejší je štandard \textbf{IEEE 754}. Definuje vlastný formát uloženia čísel a viaceré formáty s~rôznou presnosťou. Najpoužívanejšie z~nich sú formáty čísel s~jednoduchou (single) a s~dvojitou (double) presnosťou. Čísla s~jednoduchou presnosťou sú uložené na 32 bitoch, kde MSB je znamienkový bit $ S $, ďalších 8 bitov tvorí exponent $ E $, a zvyšných 23 bitov tvorí mantisu $ M $.

\bigskip
\begin{figure}[h]
\centering
\scalebox{0.2}{\includegraphics{obrazky/IEEE754_32b.eps}}
\caption{IEEE 754 formát s~jednoduchou presnosťou}
\label{formatFP32}
\end{figure}


Čísla s~dvojitou presnosťou sú uložené v~rovnakom formáte ako čísla s~jednoduchou presnosťou, avšak líšia sa v~počte bitov, ktorý je zväčšený na 64, kde MSB je znamienkový bit $ S $, ďalších 11 bitov tvorí exponent $ E $, a zvyšných 52 bitov tvorí mantisu $ M $.

\bigskip
\begin{figure}[h]
\centering
\scalebox{0.2}{\includegraphics{obrazky/IEEE754_64b.eps}}
\caption{IEEE 754 formát s~dvojitou presnosťou}
\label{formatFP64}
\end{figure}

Znamienko $ S $ nadobúda hodnoty 0, čo značí kladné číslo; alebo 1, čo značí záporné číslo. Exponent je uložený v~kóde s~nepárnym posunutím o~hodnotu BIAS. Táto hodnota je zvolená tak, aby uložený exponent bol vždy kladný. Pri jednoduchej presnosti má teda BIAS hodnotu 127 a pri dvojitej presnosti hodnotu 2047.
\newpage
Hodnota mantisy je uložená v~priamom kóde bez znamienka, znížená o~hodnotu 1, keďže je tu použitá tzv. normalizácia. Mantisa je normalizovaná do tvaru $ 1.M $, kde sa jednotka neukladá -- je skrytá, čím sa ušetrí jeden bit. Hodnotu takto uloženého čísla získame zo vzťahu:

\begin{eqnarray}
X_{754} = -1^{S}\cdot 2^{E-BIAS}\cdot (1,M)
\end{eqnarray}

\begin{tabular}{ll}
$ X_{754} $ - výsledná hodnota \\
$ BIAS $ - 127 alebo 2047 \\
$ E $ - hodnota exponentu \\
$ M $ - mantisa \\
\end{tabular}
\bigskip

Štandard IEEE 754 definuje aj špeciálne hodnoty ako kladnú/zápornú nulu, kladné/záporné nekonečno, či hodnotu NaN (not a number). Tieto hodnoty sú uvedené v~tabuľke~\ref{standard_IEEE754}.
Hodnota mantisy v~normalizovanom tvare je v~intervale $ <1,0; 2,0) $. Ak tomu tak nie je, ide o~tzv. denormalizované číslo, a hodnota exponentu je braná ako $ -126 $. Štandard IEEE 754 definuje aj spôsob vykonávania základných matematických operácií, ktoré sú popísané v~sekciách \ref{PlusMinusFP} a \ref{MulDivFP}.

\bigskip
\begin{table}[h]
\centering
\begin{tabular}{|l|l|l|l|}
\hline
\rowcolor[HTML]{C0C0C0} 
S~(znamienko) & E (exponent) & M (mantisa)       & význam                    \\ \hline
0/1           & 00000000     & nulová hodnota    & +/- 0                     \\ \hline
0/1           & 00000000     & nenulová hodnota  & +/- denormalizované číslo \\ \hline
0/1           & 1 - 254      & ľubovoľná hodnota & +/- FP číslo              \\ \hline
0/1           & 11111111     & nulová hodnota    & +/- $ \infty  $           \\ \hline
0/1           & 11111111     & nenulová hodnota  & NaN                       \\ \hline
\end{tabular}
\caption{Štandard IEEE 754 \cite{FPOnline}}
\label{standard_IEEE754}
\end{table}

\newpage
\subsection{Súčet a rozdiel} \label{PlusMinusFP}
Súčet a rozdiel v~pohyblivej rádovej čiarke sa počíta podľa vzorcov
\begin{eqnarray}
X + Y = (M_{X}\cdot 2^{E_{X} - E_{Y}} + M_{Y})\cdot 2^{E_{Y}} \text{, kde} \quad E_{X} \leq E_{Y} \\
X - Y = (M_{X}\cdot 2^{E_{X} - E_{Y}} - M_{Y})\cdot 2^{E_{Y}} \text{, kde} \quad E_{X} \leq E_{Y}
\end{eqnarray}

Postup výpočtu operácie súčtu/rozdielu v~pohyblivej rádovej čiarke podľa štandardu IEEE 754 (\cite{FPOnline_operacie}, \cite{CamborBP}) je nasledovný:

\begin{enumerate}  
\item Na začiatku výpočtu sa obe čísla skontrolujú na výskyt špeciálnych hodnôt z~tabuľky~\ref{standard_IEEE754}. Ak ide o~špeciálne číslo, výsledok sa určí podľa tabuľky~\ref{special_plus}. Inak sa pokračuje bodom 2.

\item Vykoná sa porovnanie exponetov. Ak sú exponenty rozdielne, mantisu menšieho čísla posunieme o~rozdiel exponentov doprava. Tým docielime rovnosť oboch exponentov. Pri posune je dôležité, aby sme nezabudli na 1, ktorá je skrytá, kvôli normalizácií. Posun sa vykonáva spolu s~toutou 1. 

\item Následne sa porovnajú znamienka, a podľa výsledku sa vykoná sučet alebo rozdiel mantisy väčšieho čísla a posunutej mantisy. Ak došlo k~pretečeniu, mantisa výsledku sa posunie o~jeden bit doprava a hodnota exponentu sa zvýši. Aby bolo možné pretečenie detekovať, je potrebné sčítanie/odčítanie mantís vykonávať na sčítačke o~jeden bit väčšej než je veľkosť mantisy (veľkostou mantisy sa tu myslí počet bitov potrebných na uloženie mantisy aj so skrytou 1, čiže $ |1.M| + 1 $).

\item Ak je to potrebné, vykoná sa normalizácia. Mantisa sa posunie o~potrebný počet bitov doprava resp. doľava, tak, aby bola v~tvare $ 1.M $. O~daný počet bitov sa exponent zvýši resp. zníži.

\item Na koniec výpočtu sa skontroluje hodnota exponentu. Ak je hodnota maximálna, došlo k~pretečeniu výsledku. Ten sa nastaví podľa znamienka na kladné alebo záporné nekonečno. V~opačnom prípade, ak je hodnota exponentu minimálna (nulová), došlo k~podtečeniu, a výsledok je nastavený podľa znamienka na kladnú alebo zápornú nulu.
\end{enumerate}


\begin{table}[h]
\centering
\begin{tabular}{|l|l|l|}
\hline
\rowcolor[HTML]{C0C0C0} 
Hodnota operandu 1 & Hodnota operandu 2 & Výsledok sčítania \\ \hline
FP číslo           & +/- $ \infty $     & +/- $ \infty $    \\ \hline
+/- $ \infty $     & +/- $ \infty $     & +/- $ \infty $    \\ \hline
+ $ \infty $       & - $ \infty $       & NaN               \\ \hline
NaN                & ľubovoľná hodnota  & NaN               \\ \hline
\end{tabular}
\caption{Výsledok operácie sčítania so špeciálnymi hodnotami}
\label{special_plus}
\end{table}

\newpage
\subsection{Násobenie a delenie} \label{MulDivFP}
Násobenie a delenie v~pohyblivej rádovej čiarke sa počíta nasledovne:

\begin{eqnarray}
X \times Y = (M_{X} \cdot M_{Y})\cdot 2^{E_{X} + E_{Y}} \\
X \div Y = ({M_{X}} \div {M_{Y}})\cdot 2^{E_{X} - E_{Y}}
\end{eqnarray}

Postup výpočtu operácií násobenia a delenia podľa štandardu IEEE 754 (\cite{FPOnline_operacie}, \cite{CamborBP}) je nasledovný:

\begin{enumerate}  
\item Rovnako ako pri sčítaný, aj teraz sa na začiatku výpočtu skontroluje výskyt špeciálnych hodnôt oboch čísel podľa tabuľky~\ref{standard_IEEE754}. Ak ide o~špeciálne číslo, výsledok sa určí podľa tabuľky~\ref{special_nasobenie} alebo \ref{special_delenie}. Pri operácii delenia je potrebné kontrolovať nepovolenú operáciu delenie nulou. Pokračuje sa bodom 2.

\item Pri násobení sa hodnota exponentu vypočíta ako súčet exponentov, od ktorého sa odpočíta hodnota \textit{BIAS}. Pri operácii delenia sa hodnota exponentu vypočíta ako rozdiel exponentov, ku ktorému je pripočítaná hodnota \textit{BIAS}.

\item Výsledná mantisa je rovná sučinu resp. podielu mantís. Pri násobení je potrebné použiť násobičku, ktorej bitová šírka sa rovná dvojnásobku počtu bitov mantisy $ 1.M $. Ak dôjde k~pretečeniu alebo k~podtečeniu mantisy, vykoná sa posun mantisy doprava resp. doľava a hodnota exponentu sa zvýši resp. zníži.

\item Pokiaľ je to potrebné, prebehne normalizácia.

\item Na konci výpočtu sa skontroluje hodnota exponentu. Postupuje sa rovnako ako pri operácii súčtu: ak je hodnota exponentu maximálna, nastaví sa podľa znamienka na kladné alebo záporné nekonečno. V~opačnom prípade, ak je hodnota exponentu minimálna (nulová), výsledok sa nastaví podľa znamienka na kladnú alebo zápornú nulu.
\end{enumerate}


\begin{table}[h]
\centering
\begin{tabular}{|l|l|l|}
\hline
\rowcolor[HTML]{C0C0C0} 
Hodnota operandu 1 & Hodnota operandu 2 & Výsledok násobenia \\ \hline
kladné/záporné FP číslo & +/- $ \infty $ & +/- $ \infty $ \\ \hline
nula           & +/- $ \infty $ & NaN \\ \hline
+/- $ \infty $ & +/- $ \infty $ & +/- $ \infty $ \\ \hline
NaN & ľubovoľná hodnota & NaN \\ \hline
\end{tabular}
\caption{Výsledok operácie násobenia so špeciálnymi hodnotami}
\label{special_nasobenie}
\end{table}

\begin{table}[h]
\centering
\begin{tabular}{|l|l|l|}
\hline
\rowcolor[HTML]{C0C0C0} 
Hodnota operandu 1 & Hodnota operandu 2 & Výsledok násobenia \\ \hline
kladné/záporné FP číslo & +/- 0 & +/- $ \infty $ \\ \hline
0 & 0 & NaN \\ \hline
\end{tabular}
\caption{Výsledok operácie delenia so špeciálnymi hodnotami}
\label{special_delenie}
\end{table}

\chapter{Numerické integrátory} \label{NUM_INTEGRATORY}
Numerický integrátor je hardvérový komponent, ktorý slúži na výpočet numerickej integrácie. Podľa spôsobu výpočtu a komunikácie medzi komponentmi integrátora sa numerické integrátory delia na:

\begin{itemize}
\item sériovo-sériové integrátory, skrátene sériové integrátory (sériová komunikácia aj výpočet)
\item sériovo-paralelné integrátory (sériová komunikácia a paralelný výpočet)
\item paralelno-paralelné integrátory, skrátene paralelné integrátory (paralelná komunikácia aj výpočet)
\end{itemize}

V tejto práci sa budeme zaoberať paralelnými numerickými integrátormi, kvôli ich jednoduchosti a rýchlosti výpočtu. Ďalej môžeme numerické integrátory rozdeliť na jednovstupé a dvojvstupé. Jednovstupý integrátor vykonáva integráciu vstupnej hodnoty a posiela ju na výstup. Schéma tohto typu integrátora je znázornená na obrázku \ref{schema_i} a ako z názvu vyplýva obsahuje jeden vstup pre vstupnú hodntotu. Ďalej obsahuje jeden vstup pre počiatočnú podmienku a jeden výstup pre výsledok výpočtu. Dvojvstupové integrátory obsahujú jeden vstup pre počiatočnú podmienku, dva vstupy pre prívod operandov a jeden výstup pre výsledok výpočtu. Schéma integrátora je znázornená na obrázku \ref{schema_ndi}.


\begin{figure}[H]
\centering
\subfloat[Schéma jednovstupého integrátora]{\label{schema_i} \includegraphics[width=0.4\linewidth]{obrazky/jednoduchy_integrator.pdf}} \hspace{1.0cm}
\subfloat[Schéma dvojvstupého násobiaceho/deliaceho integrátora]{\label{schema_ndi} \includegraphics[width=0.4\linewidth]{obrazky/del_nas_integrator.pdf}}
\label{schema_i_ndi}
\caption{Schéma jendovstupého a dvojvstupého integrátora}
\end{figure}

Tieto integrátory rozdeľujeme podľa použitej operácie na násobiace a deliace integrátory. Násobiaci integrátor vykonáva deriváciu násobenia dvoch vstupných hodnôt. Deliaci integrátor zase deriváciu delenia dvoch vstupných hodnôt. Výsledná hodnota je poslaná na výstup.

V nasledujúcich podkapitolách predstavíme jednotlivé návrhy paralelných násobiacich a paralelných deliacich integrátorov, oba typy v pevnej a v pohyblivej rádovej čiarke. Predstvíme taktiež jednovstupý paralelný integrátor v pevnéj a pohyblivéj rádovej čiarke.
\bigskip


\section{Návrh násobiaceho integrátora v~pevnej rádovej čiarke}
Násobiaci integrátor počíta rovnicu \eqref{dif_nasobenie} pomocou \eqref{DY1_cleny_nasobenia} -- \eqref{DY4_cleny_nasobenia}. Na základe týchto rovníc bol vytvorený návrh paralelného násobiacého integrátora, ktorý je na obrázku~\ref{ppni}. Návrh vychádza z~práce V. Závadu \cite{ZavadaBP} a bol upravený a rozšírený o~počet registrov $ DR(N-1) $ a $ DQ(N-1) $, ktoré slúžia na ukladanie prichádzajúcich členov. Rozšírený bol aj počet registrov pre uloženie kroku $ h $ integračnej metódy a jeho podielov. Počet týchto registorov je o jeden menší ako rád $ ORD $ použitej Taylorovej metódy ($ N = ORD $), kedže pri výpočte sa používajú predchádzajúce členy Taylorovej metódy. Rád metódy je vhodné a potrebné zvoliť vzhľadom na použitú aritmetiku a požadovanú presnosť.

Každý člen $ DY(N-1) $ obsahuje postupné delenie integračného kroku $ h $. Tieto hodnoty sú predpočítané a uložené v~sade registrov $ h $. Pre optimalizáciu a ušetrenia miesta však nie je potrebné uložiť všetkých $ N $ hodnôt, stačí uložiť len tie hodnoty, ktorých deliteľ je nepárne číslo. Ostatné hodnoty je možné vypočítať jednoduchým posunom registra doprava, čo je vlastne delenie číslom 2. Je síce potrebné pridať riadice signály pre ovládanie posunu jednotlivých registrov avšak výsledkom je znížie počtu registrov $ h $ o~polovicu. Počet operácií potrebných na výpočet sa nezvýši, keďže posun registrov je možné vykonávať v~predstihu a paralelne s~inými operáciami.

\bigskip
\begin{figure}[h]
\centering
\scalebox{0.6}{\includegraphics{obrazky/ppni.png}}
\caption{Paralelno-paralelný násobiaci integrátor \cite{ZavadaBP}.}
\label{ppni}
\end{figure}

% Please add the following required packages to your document preamble:
% \usepackage[table,xcdraw]{xcolor}
% If you use beamer only pass "xcolor=table" option, i.e. \documentclass[xcolor=table]{beamer}
\begin{table}[H]
\centering
\begin{tabular}{|
>{\columncolor[HTML]{DAE8FC}}l |l|}
\hline
\multicolumn{1}{|c|}{\cellcolor[HTML]{68CBD0}{\color[HTML]{000000} \textbf{Skratka}}} & \multicolumn{1}{c|}{\cellcolor[HTML]{68CBD0}{\color[HTML]{000000} \textbf{Popis}}} \\ \hline
\textbf{R, Q} & vstupné operandy integrátora \\ \hline
\textbf{Y0} & počiatočná podmienka \\ \hline
\textbf{N} & maximálny rád metódy \\ \hline
\textbf{h, h/2...h/N} & sada registrov s integračním krokom metódy a jeho podielov \\ \hline
\textbf{r0, DR1, ...DR(N-1)} & sada registrov jednotlivých členov vstupného operandu R \\ \hline
\textbf{q0, DQ1, ...DQ(N-1)} & sada registrov jednotlivých členov vstupného operandu Q \\ \hline
\textbf{MUL} & paralelná násobička \\ \hline
\textbf{SUM} & paralelná sčítačka \\ \hline
\textbf{ACC} & akumulátor - register pre priebežné ukladanie medzivýsledkov \\ \hline
\textbf{RD} & register pre uloženie jednotlivých členov Taylorovej rady \\ \hline
\textbf{RV} & register pre uloženie celkového výsledku \\ \hline
\textbf{MPX} & multiplexor 2-1 \\ \hline
\textbf{SEL1, SEL2, SEL3} & riadiace signály multiplexorov \\ \hline
\textbf{SELh, SELr, SELq} & riadiace signály registrov \\ \hline
\textbf{SELy0} & riadiaci signál pre zápis počiatočnej podmienky \\ \hline
\textbf{RWr, RWq} & povoľovacie signály sád registrov (READ/WRITE) \\ \hline
\textbf{RWrv, RWrd, RWacc} & povoľovacie signály registrov (READ/WRITE) \\ \hline
\textbf{BLOK} & blokový signál multiplexora - na výstupu 0 \\ \hline
\end{tabular}
\caption{Význam skratiek použitých v obrázku \ref{ppni}.}
\label{my-label}
\end{table}

Na začiatku výpočtu sú pomocou signálu \textit{RESET} vynulované všetky registre, a nastavia sa potrebné signály na multiplexoroch \textit{MPX}. Následne je do registrov \textit{RV} a \textit{RD} nahraná počiatočná podmienka, do registra \textit{h} je nahraný integračný krok metódy a do registrov \textit{h/i, i=2,3..N} sú nahrané predpočítané hodnoty podielov. Povolovacím signálom \textit{EN} sa spustí výpočet. Ako prvé sa uložia vstupné hodnoty \textit{R} a \textit{Q} do registrov. Na začiatku každého cyklu výpočtu sú vstupné hodnoty ukladané postupne do ďalších registorv. Po uložení sa začne samotný výpočet. Honota aktuálne počítaného člena Taylorovej rady sa postupne ukladá do registra \textit{RD} a odtial je privedená na výstup integrátora.
Do registra \textit{RV} je ukladaný súčet jednotlivých členov Taylorovej rady - čiže celkový výsledok derivácie vstupných hodnôt. Táto hodnota nás bude zaujímať napríklad keď je integrátor "posledný" v zapojení, čiže jeho výstup nie je nikam pripojený a teda nepotrebujeme použiť hodnoty jednotlivých členov.


\section{Návrh deliaceho integrátora v~pevnej rádovej čiarke}
Tento integrátor počíta rovnicu \eqref{dif_delenie} pomocou členov \eqref{DY1_cleny_delenia} - \eqref{DY4_cleny_delenia}. Podobne, ako u~násobiaceho integrátora, bol z~týchto rovníc vytvorený návrh paralelného deliaceho integrátora. Návrh vychádza z mojej bakalárskej práce \cite{MatecnyBP} a bol upravený podobne ako predošlí násobiaci integrátor zvýšením počtu registrov $ DU(N-1) $ a $ DV(N-1) $. Taktiež sa zvýšil počet registrov $ DY(N-1) $, ktoré slúžia na uloženie jednotlivých členov Taylorovej rady, kedže na výpočet nasledujúceho člena je použitý predchádzajúci člen. Sada týchto registrov okrem hodnôt $ DY(n-1) $ obsahuje register pre uloženie kroku $ h $ integračenj metódy. Deliaci integrátor, narozdiel od násobiaceho integrátora, nepotrebuje pri výpočte hodnoty podielov kroku numerickej metódy a teda stačí uložiť len jednu hodnotu $ h $. Deliaci integrátor ale používa sadu registrov, ktorá obsahuje hodnoty $ 1/N $. Podobne ako u~násobiaceho integrátora je možné zmenšiť počet týchto registrov na polovicu s~využitím aritmetického posunu (operácia \textit{shift}). Register \textit{count} obsahuje \textit{counter}, ktorý sa postupne inkrementuje v každom cykle výpočtu, a s~ktorým sa násobí hodnota $ DY(N-1) $. Vyplíva to z rovnic \eqref{DY1_cleny_delenia} - \eqref{DY4_cleny_delenia} a \eqref{suma_div}, kde pri výpočte každého člena Taylorovej rady sa hodnota $ DY(N - k) $ násobí hodnotou $ N - k $. Výsledná vynásobená hodnota je uložená opätovne do daného registra $ DY(N-1) $ a znova použitá v~ďalšom výpočte. Tým sa ušetrí operácia násobenia v ďalšom cykle výpočtu.

\begin{figure}[h]
\centering
\scalebox{0.5}{\includegraphics{obrazky/ppdi.png}}
\caption{Paralelno-paralelný deliaci integrátor \cite{MatecnyBP}.}
\label{ppdi}
\end{figure}
\bigskip



% Please add the following required packages to your document preamble:
% \usepackage[table,xcdraw]{xcolor}
% If you use beamer only pass "xcolor=table" option, i.e. \documentclass[xcolor=table]{beamer}
\begin{table}[H]
\centering
\begin{tabular}{|
>{\columncolor[HTML]{DAE8FC}}l |l|}
\hline
\multicolumn{1}{|c|}{\cellcolor[HTML]{68CBD0}{\color[HTML]{000000} \textbf{Skratka}}} & \multicolumn{1}{c|}{\cellcolor[HTML]{68CBD0}{\color[HTML]{000000} \textbf{Popis}}} \\ \hline
\textbf{V, U} & vstupné operandy integrátora \\ \hline
\textbf{1/v, DV1, ... DV(N-1)} & sada registrov jednotlivých členov vstupného operandu V \\ \hline
\textbf{u0, DU1, ... DU(N-1)} & sada registrov jednotlivých členov vstupného operandu U \\ \hline
\textbf{count} & čítač cyklov výpočtu - N \\ \hline
\textbf{1/2, 1/3, ... 1/N} & sada registrov s jednotlivými podielmi \\ \hline
\textbf{h, DY1, ... DY(N-1)} & sada registrov s krokom metódy a s vypočítanými členmi \\ \hline
\textbf{DIV} & delička \\ \hline
\textbf{XOR} & invertovanie hodnoty v dvojkovom doplnku (xor +1) \\ \hline
\textbf{MPX} & multiplexor 2-1, 4-1 \\ \hline
\textbf{START} & povoľovací signál na spustenie výpočtu \\ \hline
\textbf{SEL1, SEL6, SEL7, SEL8} & riadiace signály multiplexorov \\ \hline
\textbf{SEL2, SEL3, SEL4, SEL5} & riadiace signály registrov \\ \hline
\textbf{SELxor} & signál na invertovanie vstupnej hodnoty \\ \hline
\textbf{CLKcount} & signál na zvýšenie hodnoty čítača \\ \hline
\textbf{RWv, RWu, RWy} & povoľovacie signály sád registrov (READ/WRITE) \\ \hline
\end{tabular}
\caption{Význam skratiek v obrázku \ref{ppdi}.}
\label{my-label}
\end{table}




Podobne ako pri násobiacom integrátore, aj pri paralelnom deliacom integrátore sú na začiatku výpočtu vynulované registre pomocou signálu \textit{RESET} a nastavené signály multiplexorov \textit{MPX}. Ďalej je do registrov \textit{RD} a \textit{RV} nahraná počiatočná podmienka a do registra $ h $ je nahraný integračný krok. Do registrov $ 1/n $ sú uložené predpočítané konštanty. Po prijatí hodnôt $ U $ a $ V $ sa začne výpočet. Hodnota $ V $ je privedená do deličky $ DIV $ a spustí sa výpočet $ 1/v $ s~použitím deliaceho algoritmu \textit{SRT}. Delenie je realizované len raz počas celého výpočtu, keďže ide o~veľmi náročnú operáciu. Po skončení operáce delenia je výseldok uložený do sady registrov $ DVN $ a to konkrétne do registra $ 1/v $. V ďalšom vykle výpočtu je vstupná hodnota $ V $, privedená priamo do sady registrov $ DVN $ bez delenia. Hodnota $ U $ je uložená do sady registrov $ DUN $. Kvôli optimalizácii je paralelne s~delením realizovaný výpočet násobenia $ uh $. Po skončení výpočtu je výsledok aktuálneho člena uložený do registra \textit{RD} a privedený na výstup deliaceho integrátora. Suma jednotlivých členov je postupne ukladaná v každom cykle do registra $ RV $, z ktorého, rovnako ako v násobiacom integrátore, je možné získať hodnotu privedeným na výstup.


\section{Návrh jendovstupého integrátora}
Tento integrátor bol navrhnutý podľa rovníc \eqref{DY_cleny} na zálade ktorých počíta difernciálnu rovnucu \eqref{jednoducha_rovnica}. Z toho vyplýva, že vykonáva numerickú integráciu vstupnej hodnoty a následne výslednú hodnotu posiela na výstup. Schéma integrátora je na obrázku \ref{ppi_fp} a vychádza z práce J. Opálku \cite{OpalkaBP}. Na naštartovanie výpočtu slúži počiatočna podmienka. Tá je nahraná na začiatku výpočtu do registra \textit{RV}. Následne je cez multiplexor \textit{MPX} privedená a uložená do registra \textit{RD}. V sade registrov $ h $ je uložený integračný krok metódy a jeho podiely. Rovnako ako vpredchádzajucich prípadoch je možné počet registrov znížiť na polovicu. Vstupnú hodnotu $ Z $ nie je potrebné ukladať do registrov, kedže sa nepoužíva pri výpočte ďalších členov. Jednotlivé hodnoty členov sú ukladané do registra \textit{RV} a poslané na výstup integrátora. Ak chceme získať výslednú hodnotu Taylorovej rady rovnice \eqref{jednoducha_rovnica}, stačí priviesť hodnotu z registra \textit{RV} cez multiplexor \textit{MPX} do registra \textit{RD}, kde je hodnota sprístupnená na výstupe integrátora.


\bigskip
\begin{figure}[h]
\centering
\scalebox{0.4}{\includegraphics{obrazky/ppi.png}}
\caption{Paralelný jednovstupový integrátor v pohyblivej rádovej čiarke.}
\label{ppi_fp}
\end{figure}
\bigskip

\section{Návrh komponentu pre spracovanie exponentov}
V pohyblivéj rádovej čiarke sú operácie násobenia, delenia a sčítania (odčítania) zložitejšie, nakoľko je k týmto operáciam pridaná aj práca s výpočtom znamienka, exponentu a mantisi. Výpočet exponentov je možné vykonávanať v každej z komponent (násobička, delička, sčítačka) samostane alebo pomocou jednej komponenty zdielanej medzi týmito komponentmi. Pri zdieľanom prístupe je možné znížiť priestorovú zložitosť zapojenia, ale zvýši sa tým náročnosť riadenie kontroléra a synchronizácia. V deliacom integrátore to môže spôsobiť zdržanie výpočtu, keď sa operácia delenia a násobenia vykonávajú paralelne. Avšak táto situácie nastane len raz na začiatku výpočtu. Predošlé popísané návrhy násobaiceho, deliaceho a jednovstupového integrátora je možné použiť ako pri implementácií v pevnej rádovej čiarke tak aj v pohyblivéj rádovej čiarke. Integrátory v pohyblivéj rádovej čiarke vychádzajúce z popísaných návrhov pracujú s exponentami v každej operácií samostatne.
V nasledujúcich sekciách si popíšeme druhú variantu spracovania exponentu so sdielanýcm komponentom.

Blokové schémy zapojenia integrátorov pracujúcich v~pohyblivej rádovej čiarke vychádzajú z~predchádzajúcich návrhov, ale boli rozšírené o~prácu so znamienkami, s~mantisou a s~exponentmi. Samotný výpočet exponenta sa deje v zdielanom komponente \textit{EXP}, ktorého návrh je zobrazený na obrázku~\ref{ppi_fp_exp}.

\bigskip
\begin{figure}[h]
\centering
\scalebox{0.8}{\includegraphics{obrazky/ppdi_fp_exp.png}}
\caption{EXP - blok pracujúci s~exponentmi.}
\label{ppi_fp_exp}
\end{figure}
\bigskip


% Please add the following required packages to your document preamble:
% \usepackage[table,xcdraw]{xcolor}
% If you use beamer only pass "xcolor=table" option, i.e. \documentclass[xcolor=table]{beamer}
\begin{table}[H]
\centering
\begin{tabular}{|
>{\columncolor[HTML]{DAE8FC}}l |l|}
\hline
\multicolumn{1}{|c|}{\cellcolor[HTML]{68CBD0}{\color[HTML]{000000} \textbf{Skratka}}} & \multicolumn{1}{c|}{\cellcolor[HTML]{68CBD0}{\color[HTML]{000000} \textbf{Popis}}} \\ \hline
\textbf{E1} & vstupná hodnota väčšieho exponenta \\ \hline
\textbf{E2/shift} & vstupná hodnota menšieho exponenta/hodnota posunu \\ \hline
\textbf{BIAS} & hodnota 127 alebo 2047 \\ \hline
\textbf{SUM (8/11bit)} & paralelná 8 alebo 11 bitová sčítačka \\ \hline
\textbf{INV} & invertor \\ \hline
\end{tabular}
\caption{Význam skratiek použitých v obrázku \ref{ppi_fp_exp}.}
\label{my-label}
\end{table}

Komponent \textit{EXP} slúži na vykonávanie výpočtov s~exponentmi, ktoré sú popísané v~sekciách~\ref{PlusMinusFP} a~\ref{MulDivFP}. Obsahuje dva vstupy, do ktorých sú privedené jednotlivé exponenty z~komponentov $ DIV $, $ MUL $ a $ SUM $ a jeden výstup. Celý komponent \textit{EXP} pracuje na počte bitov rovnému veľkosti exponenta, ktorá je závisla na použitej aritmetike. Pri jednoduchej presnosti (32 bitov) na 8 bitoch alebo na 11-bitoch pri dvojitej presnosti (64 bitov). Komponent teda obsahuje buď 8 bitovú alebo 11 bitovú sčítačku a ostatne komponenty v rovnakej bitovej šírke.
Pri vykonávaní operácie súčinu alebo rozdielu slúži komponent \textit{EXP} na výpočet rozdielu exponentov. Výsledná hodnota rozdielu je privedená naspäť do sčítačky \textit{SUM} cez register \textit{ACC}. O túto hodnotu je následne v sčítačke posunutá hodnota mantisy menšieho čísla doprava. Výsledná hodnota mantisy je potom súčet/rozdiel mantisy väčšieho čísla a posunutej mantisy. Znamienko a exponent sú rovné hodnote väčšieho čísla z počítaných operantov.
Pri operácii delenia alebo násobenia slúži komponent \textit{EXP} na výpočet výsledného exponentu. Podľa typu operácie sa vykoná sučet alebo rozdiel prijatých exponentov. Táto hodnota je uložená v~registri \textit{ACC} a privedená naspäť do sčítačky $ SUM_{8/11bit} $ s~hodnotou z~registra $ BIAS $. Vykoná sa súčet alebo rozdiel týchto hodnôt. Získame tak hodnotu nového exponent, ktorá je privedená naspäť do násobičky $ MUL $ alebo deličky $ DIV $. Ak však je po delení alebo násobení potrebné vykonať posun mantisy hodnota vypočítaného exponentu je privedená z \textit{ACC} cez multiplexor \textit{MPX} naspäť do sčítačky  $ SUM_{8/11bit} $ a na vstup \textit{E2/Shift} je privedená hodnota posunu. Vykoná sa rozdiel hodnôt, čím vykonáme posun exponenta. Následne je výsledná hodnota privedená do násobičky $ MUL $ alebo deličky $ DIV $ a použitá ako nová hodnota exponentu.

Kvôli prehľadnosti neobsahuje schéma zapojenia znázornenie výpočtu znamienka a rozdelenie operandov na znamienko, exponent a na mantisu, a ich opätovné zloženie. Tieto oberácie sa vykonávajú v~komponentoch \textit{DIV}, \textit{MUL} a \textit{SUM}.\\

\section{Návrh násobiaci integrátora v~pohyblivej rádovej čiarke}
Návrh paraleného násobiaceho integrátora v~pohyblivej rádovej čiarke so zdielaným komponentom \textit{EXP} je na obrázku~\ref{ppni}. Čísla v~pohyblivej rádovej čiarke môžeme zobraziť presnejšie ako čísla v~pevnej rádovej čiarke, čiže pri uložení malých čísel v~pohyblivej rádovej čiarke dochádza k~menšej zaokrúhľovacej chybe. Z~tohto dôvodu je možné počítať Taylorovu radu s~použitím väčšieho počtu členov a zvýšiť tak presnoť výpočtu. Inegrátory v~pohyblivej rádovej čiarke teda môžu počítať viacej členov Taylorovej rady a teda počet registrov $ DR(N-1) $ a $ DQ(N-1) $ sa zvýši. Sada registrov $ h/i, i=2,3..N $ obsahuje \textit{N-1} registrov. Počet týchto registrov je možné znížiť rovnako ako pri integrátoroch v~pevnej rádovej čiarke.

\begin{figure}[h]
\centering
\scalebox{0.6}{\includegraphics{obrazky/ppni_fp40.png}}
\caption{Paralelno-paralelný násobiaci integrátor v~pohyblivej rádovej čiarke}
\label{ppni_fp}
\end{figure}
\bigskip

Spôsob výpočtu paralelného násobiaceho integrátora v~pohyblivej rádovej čiarke so zdielaným komponentom \textit{EXP} je takmer rovnaký ako pri násobiacom integrátore v~pevnej rádovej čiarke. Rozdielne sa vykonávajú operácie násobenia a sčítania. Po privedení hodnôt na vstupy násobičky $ MUL $ alebo sčítačky $ SUM $ sú čísla v~FP uložené do pomocných registrov v~týchto komponentoch. Z~týchto registrov sú jednotlivé časti FP čísla rozdistribuované do samostatných výpočetných obvodov. V komponente \textit{MUL} sú znamienka privedené ku komponentu $ XOR $, ktorý vykonáva nonekvivalenciu. V komponente \textit{SUM} je výsledné znamienko rovné znamienku väčšieho zo vstupných čísel. Exponenty, ako je popísané vyššie, spracúva komponent $ EXP $. Mantisy sú privedené do paralelnej násobičky alebo sčítačky. Veľkosť výsledku násobičky je dvojnásobná ako veľkosť mantisy so skrytou jednotkou t.j. 48 bitov pri jednoduchej presnosti a 106 bitov pri dvojitej presnosti. Veľkosť sčítačky je rovná veľkosti mantisy so skrytou jednotkou t.j. 24 alebo 53 bitov. Výsledné hodnoty jednotlivých častí čísla v pohyblivej rádovej čiarke sú na výstupe spojené do jedého čísla a uložené do výstupného registra daného komponentu ($ MUL $ alebo $ SUM $). Následne sú poskytnuté na jeho výstupe k~ďalšiemu výpočtu.

\section{Deliaci integrátor v~pohyblivej rádovej čiarke}
Paralelný deliaci integrátor v~pohyblivej rádovej čiarke so zdieľaým komponentom \textit{EXP} je najzložitejší z~navrhnutých integrátorov. Obsahuje všetky spomínané operácie: sčítanie, odčítanie, násobenie a delenie; a všetky vykonáva v~pohyblivej rádovej čiarke, kde práca s exponentami je vykonávanaá v jednej komponente \textit{EXP}.
Operácie násobenia a sčítania sa vykonávajú rovnako ako v~paralelnom násobiacom integrátore v~pohyblivej rádovej čiarke. Operácia delenia sa vykonáva iba raz za celý výpočet a to paralelne s~operáciou násobenia, ako je tomu aj v~deliacom interátore v~FX aritmetikou. Tu však môže dôjsť ku kolízii v~použití komponentu $ EXP $. Keďže delenie je náročnou operáciou kde dĺžka výpočtu záleží na použití daného algoritmu. Podľa zvoleného algoritmu je potom potrebné zvoliť, ktorá operácia bude mať prednsoť v použití komponentu $ EXP $. Po uvoľnení $ EXP $ násobičkou $ MUL $ je komponent $ EXP $ pridelený deličke $ DIV $ na výpočet exponentov. Ak je použitý zdĺhavejší algoritmus pri výpočte delenia (napr. SRT algoritmus použitý v deliacom integrátore v FX aritmetike), čiže operácia delenia trvá dlhší čas ako  operácia násobenia, je vhodnejšie prenechať najprv komponentu \textit{EXP} operácií násobenia. Ak je deliaci algoritmus veľmi rýchli (napr. ) a čas výpočtu je podobný času výpočtu operácií násobnia, tak potom nezáleží ktorá z komponent bude prvá využívať \textit{EXP}. Po skončení delenia je podiel uložený do registra $ 1/v $ a pokračuje sa v~ďalšom výpočte.
Výpočet prebieha podobne ako pri deliacom integrátore bez komponentu \textit{EXP}. Rozdielne sa vykonávajú operácie delenia, násobenia a sčítania. Ďalší rozdiel je v komponente \textit{XOR}, ktorá bola nahradená komponentom \textit{INV}. Prevrátenie hodnoty čísla sa v pevnej rádovej čiarke použitím doplnkového kódu deje operáciu $ XOR $ a pričítaním jednotky ako tomu je v predchádzajúcom delaicom integrátore. V pohyblivéj rádovej čiarke sa však inverovanie hodnoty čísla vykonáva jednoduchým ivertovaním znamienkového bitu $ S $ vstupného operandu. Toto invertovanie sa vykonáva v spomínanej komponente \textit{INV}.

\begin{figure}[h]
\centering
\scalebox{0.55}{\includegraphics{obrazky/ppdi_fp40.png}}
\caption{Paralelno-paralelný deliaci integrátor v~pohyblivej rádovej čiarke}
\label{ppdi_fp}
\end{figure}
\bigskip

\newpage
\section{Sústava diferenciálnych rovníc}
Integrátory, ktoré sme si popísali je možné medzi sebou zapojiť a riešiť tak diferenciálnu rovnicu. Po zapojení integrátorov nebude nutné predpočítavať vstupné hodnoty, ale stačí zadať počiatočné podmienky na naštartovanie výpočtu a všetky ostatné hodnoty sa dopočítajú.
Zvoľme konkrétnu diferenciálnu rovnciu s operáciou násobenia v tvare:
\begin{eqnarray}
y' & = & sin(t) e^{-t} \, , \quad y(0) = 1 \label{dif_sint_et}
\end{eqnarray}
\bigskip

Rovnicu prevedieme do sústavy diferenciálnych rovníc:
\begin{eqnarray}
y' & = & qr \, , \quad y(0) = 1 \nonumber \\
r' & = & -r \, , \quad r(0) = 1 \nonumber \\
q' & = & s \, , \quad q(0) = 0 \nonumber \\
s' & = & -q \, , \quad s(0) = 1 \nonumber \\
\end{eqnarray}

Zo sústavy rovníc vytvoríme schcému zapojenia integrátorov znázornenú na obrázku \ref{ppi_fp_sustava}. Schému tvoria tri jednovstupové integrátori \textit{r}, \textit{q} a \textit{s}, dvojvstupový násobaici integrátor \textit{y} a dva inverotri. Invertor je komponenta, ktorá ivertuje prichádzajúcu hodnotu. Integrátor r a invertor tvoria spolu funkciu $ e^{-t} $. Integrátory \textit{r}, \textit{s} a invertor tvoria spolu funkciu $ sin(t) $. Nakoniec sú tieto hodnoty privádzané na vstup násobiaceho integrátora \textit{y}, ktorý počíta diferenciálnu rovnicu \ref{dif_sint_et}.
Zo schémy zapojenia je možné následne vytvoriť VHDL kód a vykonať výpočet na FPGA. Takýto postup je vhodný pre rozsiahle diferenciálne rovnice s väčším počtom operácií, ktorých výpočet by bol vykonávaný veľmi často. Vhodnejší spôsob použitia sa ponúka prepojovacia sieť medzi rôznimy integrátormi. Pred výpočtom by sa sieť nakonfigurovala podľa danej diferenciálnej rovnice a výpočet by mohol prebiehať bez nutnosti syntézy. Táto varianta je síce priestorovo náročná, ale ponúka variabilitu výpočtu.
V ďalšej kapitole si predstavíme implementáciu popísaných integrátorov a taktiež implementáciu sústavy diferenciálnch rovníc pomocou metódy bez použitia prepojovacej siete.
\bigskip

\begin{figure}[h]
\centering
\scalebox{0.5}{\includegraphics{obrazky/sustava_integratorov.pdf}}
\caption{Schéma zapojenia integrátorov \cite{MatecnyBP}}
\label{ppi_fp_sustava}
\end{figure}
\bigskip



\chapter{Implementácia integrátorv vo VHDL}
Jednotlivé integrátory predstavené v kapitole \ref{NUM_INTEGRATORY} boli popísané v jazyku VHDL v prostredí Xilinx ISE a následne odsimulované v nástroji Model Sim požitím \textit{testbanchu}. Následne niektoré z integrátorv boli otestované na programovateľnom hradlovom poli FPGA.
Pre priestorovú zložitosť paralelných integrátorv bola snaha implementovať integrátory na rozsiahľejšom čipe FPGA a to konkrétne na VIRTEX-5 s čipom XCS50. Pre prácu s týmto čipom je potrebná plná verzia programu Xilinx ISE s licenciou. Poskytnutie licencie od školy pre študenta však nie je možné. Riešením bolo nakoniec použitie licencie pomocou pripojenia sa na fakultnú siet cez VPN. Následne bol integrátor implementovaný na VIRTEX-5, avšak skončenie výpočtu bolo možné detekoval len rozsvietením diódy, čo je nepoužiteľní spôsob pre získanie hodnoty výsledku. Preto bolo snahou výsledok zobraziť na LCD displeji. Po 
pre zložitú prácu a neúspešné sprevádzkovanie displeja, prípadne iných výstupných metód, boli integrátory naprogramované a otestované v FPGA Spartan na prípravku Fitkit. Na Fitkite bola odskúšaný jednovstupový integrátor s 32 bitivou aritmetikou. Tento integrátor bol vybraný kvôli jeho najmenšej priestrorovej zložisti. Ostatné integrátory a verzie integrátorov nie je možné nahrať na FPGA použité vo Fitkite. I kvôli tomuto bola snaha otestovania integrátorov na väčšom FPGA Virtex-5.

Jednotlivé časti integrátorov boli popísané samostante a následne vzájomným prepojením bola vytvorená štruktúra prepojenia, ktorá tvorí celý integrátor. Jednotlivé časti sú  U každého integrátora sú jednotlivé kroky výpočtu riadené kontrolérom. Ten je tvorení cyklickím konečným automatom. Cyklus vyplíva z rovníc \eqref{suma_mul} a \eqref{suma_div}, kedže výpočet jednotlivých členov je podoboný, avšak so zväčšujúcim sa počtom operácií. Samozrejme po skončení výpočtu je možné signálom $ RESET $ prejsť do počiatočného stavu a zadaným novéj počiatočnej podmienky začať nový výpočet.

\section{Integrátory v pevnej rádovej čiarke}
Násobiaci aj deliaci integrátor v pevnej rádovej čiarke kódujú čísla v dvojkovom kóde.
Paralelný dvojvstupový násobiaci integrátor vo fixpoint aritmetike bol implementovaný v dvoch verziách a to na 32 a 64 bitoch. Veľkosť použitej aritmetiky je však možné jednoducho zväžšiť, keďže celý kód je písaný genericky. Taktiež je možné zmeniť počet cyklov výpočtu, čiže počet počítaných členov Taylorovej rady, avšak v závislosti od počtu cyklov $ N $ je nutné upraviť aj počet registrov $ h/i $, kde $ i = 2..N $. 
Pre 32 i 64 bitovú verziu bola použitá FX aritmetika s jedným znamienkovým bitov, s 1 bitom pred desatinnou čiatkou a s 30 bitmi respektívne 62 bitmi za desatinou čiarkou. Výpočet počíta s Taylorovou metódou 8. rádu a teda výpočet prebieha až po 8. člen Taylorovej rady t.j. DY8.


Paralelný delaici integrátor vo fixpoint arimtmetike bol implementovaný, podobne ako násobiaci integrátor, v 32 a 64 bitovej verzií. Pri návrhu integrátorov sa kládol dvôraz nie len na rýchlosť výpočtu ale aj na priestorovú zložitosť. 
Z rovnice \ref{suma_div} vyplýva, že členy $ DYN $ sú násobené číslom $ N-k $, kde $ k $ je minimálne 1 a teda najväčšie číslo je $ N-1 $. Aby bolo možné toto číslo zobrzaiť bolo potrené zvoliť vhodnú aritmetiku t.j. vhodný počet čísel pred a za desatinnou čiarkou. Čím väčší počet bitov sa nachádza pred desatinou čiarku, tým sa zväčšuje interval zobraziteľných čísel, avšak sa zmenšuje počet bitov za desatinnou čiarkou. Pri zmenšovaní počtu čísel za desatinnou čiarkou sa zmenšuje hustota zobrazenia čísel a v konečnom dôsledku presnosť. V dvojkovom doplnkovom kóde pri 1 bite pred desatinou čiarkou sme schopný výpočitať maximálne dva členy Taylorovej rady. Pri dvoch bitoch sú to 4 členy, pri troch bitoch 8 členov Taylorovej rady a pri piatich bitoch 16 členov Taylorovej rady. Kedže pri použití Taylorovej metódy 4 rádu nemusí byť riešenie dostatočné presné, v 32 bitová verzia počíta s Taylorovou metódou 8. rádu a je teda použitá aritmetika s jedným znamienkovým bitom, s tromi bitmi pred desatinnou čiarkou a zvýšných 28 bitov tvorí časť za desatinnou čiarkou. Vyšší rád metódy nie je použiteľný, keďže hodnoty vyšších členov by boli veľmi malé a teda nezobraziteľné v danej aritmetike. 
V 64 bitovej verzií bola veľkosť použitých bitov pred desatinnou čiarkou zväčšená o jeden bit. Za desatinnou čiarkou sa potom nachádza 59 bitov. V tejto verzií deliaceho integrátora sme teda schopný vypočítať v danej aritmetike až 16 členov Taylorovej rady.


\begin{landscape}
\begin{table}[]
\scriptsize
\centering
\begin{tabular}{|l|c|c|c|c|c|c|c|c|c|c|l|}
\hline
\rowcolor[HTML]{C0C0C0} 
\textbf{Stav}                                 & \textbf{SELy0} & \textbf{SEL1} & \textbf{SEL2} & \textbf{SEL3} & \textbf{SELQ} & \textbf{SELR} & \textbf{SELH} & \textbf{RWacc} & \textbf{RWrv} & \textbf{BLOK}           & \textbf{}                                                                             \\ \hline
\cellcolor[HTML]{EFEFEF}\textbf{Reset}        & 0              & 0             & 0             & 0             & 0             & 0             & 0             & 0              & 0             & 0                       & \begin{tabular}[c]{@{}l@{}}count = 0;\\ countQ = 0;\end{tabular}                      \\ \hline
\cellcolor[HTML]{EFEFEF}\textbf{Init}         & 1              & X             & X             & X             & X             & X             & X             & 0              & 1             & X                       & \begin{tabular}[c]{@{}l@{}}count = 0;\\ countQ = 0;\end{tabular}                      \\ \hline
\cellcolor[HTML]{EFEFEF}\textbf{MulDQxDRx}    & X              & 1             & 0             & 0             & countQ        & count-countQ  & X             & 0              & 0             & If countQ=count ? 1 : 0 & \begin{tabular}[c]{@{}l@{}}If count \textless N ? \\ WriteToAcc : Result\end{tabular} \\ \hline
\cellcolor[HTML]{EFEFEF}\textbf{WriteToAcc}   & X              & 1             & 0             & 0             & countQ        & count-countQ  & X             & 1              & 0             & If countQ=count ? 1 : 0 & \begin{tabular}[c]{@{}l@{}}If countQ = 0 ?\\ MulAccH\_RV : SetupCounter\end{tabular}  \\ \hline
\cellcolor[HTML]{EFEFEF}\textbf{SetupCounter} & X              & X             & X             & X             & X             & X             & X             & 0              & 0             & X                       & countQ--;                                                                             \\ \hline
\cellcolor[HTML]{EFEFEF}\textbf{MulAccH\_RV}  & X              & 0             & 1             & 1             & X             & X             & count         & 0              & 0             & X                       &                                                                                       \\ \hline
\cellcolor[HTML]{EFEFEF}\textbf{SaveToAcc}    & X              & 0             & 1             & 1             & X             & X             & count         & 1              & 0             & X                       & countQ++;                                                                             \\ \hline
\cellcolor[HTML]{EFEFEF}\textbf{SaveToRv}     & 0              & 0             & X             & X             & X             & X             & X             & 0              & 1             & X                       & count++;                                                                              \\ \hline
\cellcolor[HTML]{EFEFEF}\textbf{Result}       & X              & X             & X             & X             & X             & X             & X             & 0              & 0             & X                       & \begin{tabular}[c]{@{}l@{}}If en = 0 ?\\ Result : Init\end{tabular}                   \\ \hline
\end{tabular}
\caption{Kontrolér násobiaceho integrátora v FX}
\label{my-label}
\end{table}

% --------------------------------------------
\begin{table}[]
\scriptsize
\centering
\begin{tabular}{|
>{\columncolor[HTML]{EFEFEF}}l |c|c|c|c|c|c|c|c|c|c|l|}
\hline
\cellcolor[HTML]{C0C0C0}\textbf{Stav} & \cellcolor[HTML]{C0C0C0}\textbf{SELy0} & \cellcolor[HTML]{C0C0C0}\textbf{SEL1} & \cellcolor[HTML]{C0C0C0}\textbf{SEL2} & \cellcolor[HTML]{C0C0C0}\textbf{SEL3} & \cellcolor[HTML]{C0C0C0}\textbf{SELQ} & \cellcolor[HTML]{C0C0C0}\textbf{SELR} & \cellcolor[HTML]{C0C0C0}\textbf{SELH} & \cellcolor[HTML]{C0C0C0}\textbf{RWacc} & \cellcolor[HTML]{C0C0C0}\textbf{RWrv} & \cellcolor[HTML]{C0C0C0}\textbf{BLOK} & \cellcolor[HTML]{C0C0C0} \\ \hline
\textbf{Reset} & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 &  \\ \hline
\textbf{Init} & 1 & X & X & X & X & X & X & 0 & 1 & X & \begin{tabular}[c]{@{}l@{}}count = 0;\\ countQ = 0;\end{tabular} \\ \hline
\textbf{\begin{tabular}[c]{@{}l@{}}MulDQxDRx1\\ MulDQxDRx2\end{tabular}} & X & 1 & 0 & 0 & countQ & count-countQ & X & 0 & 0 & \multicolumn{1}{l|}{\begin{tabular}[c]{@{}l@{}}If countQ=count ?\\ 1 : 0\end{tabular}} &  \\ \hline
\textbf{MulDQxDRx} & X & 1 & 0 & 0 & countQ & count-countQ & X & 0 & 0 & \multicolumn{1}{l|}{\begin{tabular}[c]{@{}l@{}}If countQ=count ?\\ 1 : 0\end{tabular}} & \begin{tabular}[c]{@{}l@{}}If count \textless 8 ?\\ WriteToAcc1 : Result\end{tabular} \\ \hline
\textbf{WriteToACC1} & X & 1 & 0 & 0 & countQ & count-countQ & X & 0 & 0 & \multicolumn{1}{l|}{\begin{tabular}[c]{@{}l@{}}If countQ=count ?\\ 1 : 0\end{tabular}} &  \\ \hline
\textbf{WriteToACC} & X & 1 & 0 & 0 & countQ & count-countQ & X & 1 & 0 & \multicolumn{1}{l|}{\begin{tabular}[c]{@{}l@{}}If countQ=count ?\\ 1 : 0\end{tabular}} & \begin{tabular}[c]{@{}l@{}}If countQ = 0 ?\\ MulAccH\_RV1 : SetupCounter\end{tabular} \\ \hline
\textbf{SetupCounter} & X & X & X & X & X & X & X & 0 & 0 & X & countQ--; \\ \hline
\textbf{\begin{tabular}[c]{@{}l@{}}MulACCh\_RV1\\ MulACCh\_RV2\\ MulACCh\_RV\end{tabular}} & X & 0 & 1 & 1 & X & X & count & 0 & 0 & X &  \\ \hline
\textbf{SaveToAcc1} & X & 0 & 1 & 1 & X & X & count & 0 & 0 & X &  \\ \hline
\textbf{SaveToAcc} & X & 0 & 1 & 1 & X & X & count & 1 & 0 & X & counQ++; \\ \hline
\textbf{SaveToRV} & 0 & 0 & X & X & X & X & X & 0 & 1 & X & count++; \\ \hline
\textbf{Result} & X & X & X & X & X & X & X & X & X & X & \begin{tabular}[c]{@{}l@{}}If en = 0 ?\\ Result : Init\end{tabular} \\ \hline
\end{tabular}
\caption{Kontrolér násobiaceho integrátora v FP}
\label{my-label}
\end{table}
\end{landscape}


% --------------------------------------
\begin{landscape}
\begin{table}[]
\scriptsize
\catcode`\-=12
\setlength\tabcolsep{1.5pt}
\centering
\begin{tabular}{|
>{\columncolor[HTML]{EFEFEF}}l |c|c|c|c|c|c|c|c|c|c|l|}
\hline
\cellcolor[HTML]{C0C0C0}\textbf{Stav} & \cellcolor[HTML]{C0C0C0}\textbf{SEL2} & \cellcolor[HTML]{C0C0C0}\textbf{SEL3} & \cellcolor[HTML]{C0C0C0}\textbf{SEL4} & \cellcolor[HTML]{C0C0C0}\textbf{SEL5} & \cellcolor[HTML]{C0C0C0}\textbf{SEL6} & \cellcolor[HTML]{C0C0C0}\textbf{SEL7} & \cellcolor[HTML]{C0C0C0}\textbf{SEL8} & \cellcolor[HTML]{C0C0C0}\textbf{ClkAcc} & \cellcolor[HTML]{C0C0C0}\textbf{ClkY} & \cellcolor[HTML]{C0C0C0}\textbf{BLOK} & \multicolumn{1}{c|}{\cellcolor[HTML]{C0C0C0}\textbf{}} \\ \hline
\textbf{Reset} & 000 & 00 & 000 & 000 & 00 & 0 & 0 & 0 & 0 & 0 & \begin{tabular}[c]{@{}l@{}}count = 1;\\const\_int = 1;\end{tabular} \\ \hline
\textbf{Init} & 000 & 00 & X & 000 & 01 & 0 & X & 0 & 1 & 1 &  \\ \hline
\textbf{MulUH} & 000 & 00 & X & 000 & 01 & 0 & X & 0 & 0 & 1 &  \\ \hline
\textbf{WaitDiv} & 000 & X & X & X & 00 & X & X & 0 & 0 & X & \begin{tabular}[c]{@{}l@{}}done = 1 ?\\ SaveDiv : WaitDiv;\end{tabular} \\ \hline
\textbf{SaveDiv} & 000 & X & X & 001 & 00 & 1 & 0 & 0 & 0 & 0 &  \\ \hline
\textbf{CalculationDY1} & 000 & X & X & 001 & 00 & 1 & 0 & 0 & 1 & 0 &  \\ \hline
\textbf{WriteToAcc} & 001 & X & X & const\_int+1 & \multicolumn{1}{l|}{\begin{tabular}[c]{@{}l@{}}const\_int > 0 ?\\ 10 : 00;\end{tabular}} & X & X & 0 & 0 & 1 & \begin{tabular}[c]{@{}l@{}}RWrv = 1;\\ count \textless 7 ?\\ SetupCounters : Result;\end{tabular} \\ \hline
\textbf{SetupCounters} & 001 & X & X & X & \multicolumn{1}{l|}{\begin{tabular}[c]{@{}l@{}}const\_int > 0 ?\\ 10 : 00;\end{tabular}} & 0 & X & 0 & 0 & 1 & \begin{tabular}[c]{@{}l@{}}count = 1;\\ const\_int \textgreater 0 ?\\ MulCountDYx : MulDYxDVx;\end{tabular} \\ \hline
\textbf{MulCountDYx} & X & X & X & const\_int & 10 & 0 & X & 0 & 1 & 1 &  \\ \hline
\textbf{SetupDYxDVx} & count & X & X & const\_int-count+1 & 00 & 0 & 1 & 0 & 0 & \multicolumn{1}{l|}{\begin{tabular}[c]{@{}l@{}}count = 1 ?\\ 1 : 0;\end{tabular}} &  \\ \hline
\textbf{MulDYxDVx} & count & X & X & const\_int-count+1 & 00 & 0 & 1 & 1 & 0 & \multicolumn{1}{l|}{count = 1 ? 1 : 0;} & \begin{tabular}[c]{@{}l@{}}count \textless const\_int ?\\ SetupCount : SetupDUxH;\end{tabular} \\ \hline
\textbf{SetupCount} & X & X & X & X & X & X & X & 0 & 0 & X & count++; \\ \hline
\textbf{SetupDUxH} & X & const\_int & X & 000 & 01 & 0 & 1 & 0 & 0 & 0 & XOR = 1; \\ \hline
\textbf{MulDUxH} & X & const\_int & X & 000 & 01 & 0 & 1 & 1 & 0 & 0 & XOR = 1; \\ \hline
\textbf{SetupACCdivX} & X & X & const\_int-1 & X & 11 & 1 & X & 0 & 0 & 1 &  \\ \hline
\textbf{MulACCdivX} & X & X & const\_int-1 & X & 11 & 1 & X & 1 & 0 & 1 &  \\ \hline
\textbf{SetupCalcDYx} & 000 & X & X & const\_int+1 & 00 & 1 & 0 & 0 & 0 & 0 &  \\ \hline
\textbf{CalculationDYx} & 000 & X & X & const\_int+1 & 00 & 1 & 0 & 1 & 1 & 0 &  \\ \hline
\textbf{Result} & X &  &  & X & X & X & X & 0 & 0 & X & \begin{tabular}[c]{@{}l@{}}en = 0 ? Result : Init;\end{tabular} \\ \hline
\end{tabular}
\caption{Kontrolér deliaceho integrátora v FX}
\label{my-label}
\end{table}
\end{landscape}



% Please add the following required packages to your document preamble:
% \usepackage[table,xcdraw]{xcolor}
% If you use beamer only pass "xcolor=table" option, i.e. \documentclass[xcolor=table]{beamer}
% \usepackage{lscape}
\begin{landscape}
\begin{table}[]
\scriptsize
\catcode`\-=12
\setlength\tabcolsep{1.5pt}
\centering
\begin{tabular}{|
>{\columncolor[HTML]{DAE8FC}}l |c|c|c|c|c|c|c|c|c|c|l|}
\hline
\cellcolor[HTML]{68CBD0}\textbf{Stav} & \cellcolor[HTML]{68CBD0}\textbf{SEL2} & \cellcolor[HTML]{68CBD0}\textbf{SEL3} & \cellcolor[HTML]{68CBD0}\textbf{SEL4} & \cellcolor[HTML]{68CBD0}\textbf{SEL5} & \cellcolor[HTML]{68CBD0}\textbf{SEL6} & \cellcolor[HTML]{68CBD0}\textbf{SEL7} & \cellcolor[HTML]{68CBD0}\textbf{SEL8} & \cellcolor[HTML]{68CBD0}\textbf{ClkAcc} & \cellcolor[HTML]{68CBD0}\textbf{ClkY} & \cellcolor[HTML]{68CBD0}\textbf{BLOK} & \cellcolor[HTML]{68CBD0}\textbf{} \\ \hline
\textbf{Reset} & 000 & 00 & 000 & 000 & 00 & 0 & 0 & 0 & 0 & 0 & \begin{tabular}[c]{@{}l@{}}count = 1;\\ const\_int = 1;\end{tabular} \\ \hline
\textbf{Init} & 000 & 00 & X & 000 & 01 & 0 & X & 0 & 1 & 1 &  \\ \hline
\textbf{\begin{tabular}[c]{@{}l@{}}MulUH\\ MulUH1\end{tabular}} & 000 & 00 & X & 000 & 01 & 0 & X & 0 & 0 & 1 &  \\ \hline
\textbf{SaveDiv} & 000 & X & X & 001 & 00 & 1 & 0 & 0 & 0 & 0 & ClkV = 1; \\ \hline
\textbf{SaveAcc} & 000 & X & X & 001 & 00 & 1 & 0 & 1 & 0 & 0 &  \\ \hline
\textbf{CalculationDY1} & 000 & X & X & 001 & 00 & 1 & 0 & 0 & 1 & 0 &  \\ \hline
\textbf{CalculationDY2} & 00 & X & X & 001 & 00 & 1 & 0 & 0 & 0 & 0 &  \\ \hline
\textbf{CalculationDY3} & 00 & X & X & 001 & 00 & 1 & 0 & 1 & 0 & 0 &  \\ \hline
\textbf{WriteToAcc} & 001 & X & X & const\_int+1 & \multicolumn{1}{l|}{\begin{tabular}[c]{@{}l@{}}const\_int \textgreater 0 ?\\ 10 : 00;\end{tabular}} & X & X & 0 & 0 & 1 & \begin{tabular}[c]{@{}l@{}}RWrv = 1;\\ count \textless (N-1) ?\\ SetupCounters : Result;\end{tabular} \\ \hline
\textbf{SetupCounters} & 001 & X & X & X & \multicolumn{1}{l|}{\begin{tabular}[c]{@{}l@{}}const\_int \textgreater 0 ?\\ 10 : 00;\end{tabular}} & 0 & X & 0 & 0 & 1 & \begin{tabular}[c]{@{}l@{}}count = 1;\\ const\_int \textgreater 0 ?\\ MulCountDYx : MulDYxDVx;\end{tabular} \\ \hline
\textbf{\begin{tabular}[c]{@{}l@{}}SetupCountDYx\\ MulCountDYx\end{tabular}} & X & X & X & const\_int & 10 & 0 & X & 0 & 0 & 1 &  \\ \hline
\textbf{SaveCountDYx} & X & X & X & const\_int & 10 & 0 & X & 0 & 1 & 1 &  \\ \hline
\textbf{\begin{tabular}[c]{@{}l@{}}SetupDYxDVx\\ SetupDYxDVx1\\ MulDYxDVx\\ SumDYxDVx\end{tabular}} & count & X & X & const\_int-count+1 & 00 & 0 & 1 & 0 & 0 & \multicolumn{1}{l|}{count = 1 ? 1 : 0;} &  \\ \hline
\textbf{SaveDYxDVx} & count & X & X & \multicolumn{1}{l|}{const\_int-count+1} & 00 & 0 & 1 & 1 & 0 & count = 1 ? 1 : 0; & \begin{tabular}[c]{@{}l@{}}count \textless const\_int ?\\ SetupCount : SetupDUxH;\end{tabular} \\ \hline
\textbf{SetupCount} & X & X & X & X & X & X & X & 0 & 0 & X & count++; \\ \hline
\textbf{\begin{tabular}[c]{@{}l@{}}SetupDUxH\\ MulDUxH\\ SumMulAcc\\ SaveMulAcc\end{tabular}} & X & const\_int & X & 000 & 01 & 0 & 1 & 0 & 0 & 0 & XOR = 1; \\ \hline
\textbf{SetupACCdivX} & X & X & const\_int-1 & X & 11 & 1 & X & 1 & 0 & 1 &  \\ \hline
\textbf{\begin{tabular}[c]{@{}l@{}}MulACCdivX\\ MulACCdivX1\\ SumACCdivX\end{tabular}} & X & X & const\_int-1 & X & 11 & 1 & X & 0 & 0 & 1 &  \\ \hline
\textbf{SaveACCdivX} & X & X & const\_int-1 & X & 11 & 1 & X & 1 & 0 & 1 &  \\ \hline
\textbf{\begin{tabular}[c]{@{}l@{}}SetupCalcDYx\\ SetupCalcDYx1\end{tabular}} & 000 & X & X & const\_int+1 & 00 & 1 & 0 & 0 & 0 & 0 &  \\ \hline
\textbf{CalculationDYx} & 000 & X & X & const\_int+1 & 00 & 1 & 0 & 1 & 1 & 0 &  \\ \hline
\textbf{Result} & X & X & X & X & X & X & X & 0 & 0 & X & \begin{tabular}[c]{@{}l@{}}en = 0 ?\\ Result : Init;\end{tabular} \\ \hline
\end{tabular}
\caption{My caption}
\label{my-label}
\end{table}
\end{landscape}


\section{Integrátory v pohyblivej rádovej čiarke}
Jednovstupový integrátor v pohyblivéj rádovej čiarke bol implmentovaný v 32 a v 64 bitovej verzií. Počet cyklov výpočtu nie je stanovený v implementácií integrátra ako to je u dvojvstupových integrotoroch, kedže integrátor vykonáva jednoduchú integráciu a pri výpočte nepotrebuje ukladať všetky predchádzajúce členy. Je ovládaný len pomocou signálov RESET a EN. Tie určujú či sa výpočet začína od začiatku alebo sa pokračuje výpočtom ďalšieho člena. Hodnoty kroku h a jeho podielov nie sú uložené v komponente integrátora, ale sú privádzané z nadradenej komonenty. Dôvodom je redukovanie duplicity registrov. Podrobnejšie vysvetlenie nájdeme v kapitole \ref{impl_rovnice}.

\bigskip
\begin{table}[H]
\centering
\begin{tabular}{|
>{\columncolor[HTML]{EFEFEF}}l |c|c|c|c|c|c|}
\hline
\cellcolor[HTML]{C0C0C0}\textbf{Stav} & \cellcolor[HTML]{C0C0C0}\textbf{SELy0} & \cellcolor[HTML]{C0C0C0}\textbf{SEL} & \cellcolor[HTML]{C0C0C0}\textbf{SELh} & \cellcolor[HTML]{C0C0C0}\textbf{RWrd} & \cellcolor[HTML]{C0C0C0}\textbf{RWrv} & \cellcolor[HTML]{C0C0C0}\textbf{} \\ \hline
\textbf{Reset} & 1 & 0 & 0 & 1 & 1 &  \\ \hline
\textbf{Init} & X & X & count & 0 & 0 &  \\ \hline
\textbf{MulDYxH} & X & X & count & 0 & 0 &  \\ \hline
\textbf{SetupToRD} & 0 & 1 & count & 0 & 0 &  \\ \hline
\textbf{SaveToRD} & 0 & 1 & count & 1 & 0 & \multicolumn{1}{l|}{count++} \\ \hline
\textbf{SaveToRV} & X & X & count & 0 & 1 & \multicolumn{1}{l|}{\begin{tabular}[c]{@{}l@{}}If count \textless 8 ?\\ Init : Result\end{tabular}} \\ \hline
\textbf{Result} & X & X & X & 0 & 0 & \multicolumn{1}{l|}{\begin{tabular}[c]{@{}l@{}}If en = 0 ?\\ Result : Init\end{tabular}} \\ \hline
\end{tabular}
\caption{Kontrolér jednovstupového integrátora v FP}
\label{my-label}
\end{table}



Ďalej bol implementovaný násobiaci a deliaci integrátor v pohyblivéj rádovej čiarke a taktiež vo verziách s 32 bitmi a 64 bitmi. Integrátory obsahujú paralelnú FP násobičku, paralelnú FP deličku a paralelnú FP sčítačku. Všetky komponenty boli prezvaté z xx a následne upravené a optimalizované pre daný výpočet. Komponenty vykonávajú operácie sčítanie, násobenie a delenie v troch hodinovcýh taktoch, kedže pracujeme v pohyblivej rádovej čiarke. Jednotlivé operácie boli popísané v kapitole xx. Výpočet je teda pomalší oproti variante pracujúcej s pevnou rádovou čiakrou, ale o to presnejší a zároveň sa veľmi zväčšil rozsah zobraziteľných hodnôt.

\section{Sústava integrátorv} \label{impl_rovnice}
Podľa schémy zapojenia xx bola imeplementovaná komponenta počítajúca diferenciálnu rovnicu xx. Boli použité integrátory v pohyblivej rádovej čiarke so 64 bitmi - konkrétne jednovstupový integrátor a násobiaci integrátor. Ďalej bola použitá komponenta invertor. Kedže pracujeme vo FP, invertor vykonáva jednouché invertovanie znamienkového bitu. 
Každý integrátor je riadneý svojim vlastným kontrolérom, celé zapojenie je potom ovládané hlavným kontrolérom pomocou signálov RESET a EN. Na začiatku výpočtu sú nahrané počiatočné podmienky do integrátorov. Následne je pomocou povolovacieho signálu EN spustený výpočet na všetkých integrátorch naraz. Všetky integrátory používajú pri výpočte hodnoty h a h/i. Pre optimalizáciu priestorovej zložitosti bola použitá iba jedna sada registrov h. Výber registru h je riadený pomocou signálu SELH. Jeho hodnota je určená podľa čítača cyklov. Hodnota čítača je inkrementovaná na kocni každého cyklu. Pri začatí nového cyklu je táto hodnota použitá pre signál SELH.
Kedže výpočet násobiaceho integrátora trvá dlhšie, integrátory q, r a s po dokončení výpočtu čakajú na násobiaci integrátor. Ten po dokončení výpočtu aktivuje signál OEN na 1. Kontrolér následne spustí výpočet každého integrátora odznova. Toto sa opakuje až kým výpočet jedného kroku metódy neskončí. Pri výpočte ďalšieho kroku výpočtu sú obnovené počiatočné podmienky a výpočet sa znova vykoná.

\begin{figure}[h]
\centering
\scalebox{0.5}{\includegraphics{obrazky/rovnica.png}}
\caption{Schéma zapojenia integrátorov}
\label{ppi_fp_sustava_impl}
\end{figure}



% Please add the following required packages to your document preamble:
% \usepackage{multirow}
% \usepackage[table,xcdraw]{xcolor}
% If you use beamer only pass "xcolor=table" option, i.e. \documentclass[xcolor=table]{beamer}
\begin{table}[]
\centering
\begin{tabular}{|
>{\columncolor[HTML]{EFEFEF}}l |c|c|c|c|}
\hline
\cellcolor[HTML]{C0C0C0}\textbf{Stav} & \cellcolor[HTML]{C0C0C0}\textbf{SELy0} & \cellcolor[HTML]{C0C0C0}\textbf{SEL} & \cellcolor[HTML]{C0C0C0}\textbf{RWrd} & \cellcolor[HTML]{C0C0C0}\textbf{RWrv} \\ \hline
\textbf{Reset} & 1 & 0 & 1 & 0 \\ \hline
\textbf{Init} & X & X & 0 & 1 \\ \hline
\textbf{MulDYxH} & X & X & 0 & 0 \\ \hline
\textbf{SetupToRD} & 0 & 1 & 0 & 0 \\ \hline
\textbf{SaveToRD} & 0 & 1 & 1 & 0 \\ \hline
\textbf{SaveToRV} & X & X & 0 & 1 \\ \hline
\cellcolor[HTML]{EFEFEF} & X & X & 0 & 0 \\ \cline{2-5} 
\multirow{-2}{*}{\cellcolor[HTML]{EFEFEF}\textbf{Result}} & \multicolumn{4}{l|}{\begin{tabular}[c]{@{}l@{}}if ENDyx = 0 ?\\      if en = 0 ? Result : MulDYxh\\ : InitDy\end{tabular}} \\ \hline
\end{tabular}
\caption{Kontrolér jednovstupového integrátora v FP v zapojení do sústavy}
\label{my-label}
\end{table}




\chapter{Analýza}
\section{Porovanie Taylorovej rady s metódou Runge-Kutta 2. radu}
\section{Porovanie Taylorovej rady s metódou Runge-Kutta 4. radu}

\chapter{Záver}
V~tejto práci sme sa zaoberali numerickou integráciou pomocou metódy Taylorovej rady. Úpravou jej členov sme získali potrebné rovnice, z~ktorých boli vytvorené jednotlivé návrhy integrátorov.
Rozšírili sme návrhy paralelných integrátorov s~operáciou násobenia a delenia v~pevnej rádovej čiarke tak, aby s~nimi bolo možné počítať diferenciálne rovnice na 20 členov Taylorovej rady. Ďalej sme tieto integrátory navrhli aj v~prevedení pohyblivej rádovej čiarky. Navrhli sme komponent slúžiaci na výpočet exponentu a na jeho úpravu pri normalizácii. Keďže výpočet v~aritmetike pohyblivej rádovej čiarky je presnejší, integrátory využívajúce túto aritmetiku sú navrhnuté na riešenie diferenciálnych rovníc až na 40 členov Taylorovej rady.

Ďalším pokračovaním práce je popísanie navrhnutých integrátorov vo VHDL, otestovanie ich funkčnosti na VIRTEX5 a následné analyzovanie ich časovej a priestorovej zložitosti v~porovnaní s~metódou Runge-Kutta.

%=========================================================================
